# CellPose Parameters

CellPose is an AI-based segmentation tool that utilizes a pretrained model (generated by the user or in-built in the software) to generate the cell segmentation. The final output for CellPose is a bitmap file, where each pixel associated with a cell is given a number label. The output can be visualized in Fiji as shown below:

![image](https://user-images.githubusercontent.com/46695970/122488352-e4676400-d00f-11eb-8675-0332624ebc16.png)

For all our test data, we found that using the pretrained model was sufficient for accurate segmentation. We only run the first, second and sixth module. Instructions on CellPose for the first and second module as shown here: 

![image](https://user-images.githubusercontent.com/46695970/122488731-a74fa180-d010-11eb-96ab-fec2ab5484c0.png)

Once CellPose is installed, segmentation takes place in the sixth module. Google colab requires uploading images into Google Drive. For better segmentation, upload the modified KTR images generated in Fiji (intensity adjustemnt and smoothing - see STAGE 1). 

Below are parameters used to generate the segmentation. CellPose will display some images of the segmentation to verify if the segmentation is accurate. 
![image](https://user-images.githubusercontent.com/46695970/122489138-89cf0780-d011-11eb-8c1c-3adf3ef1d1b5.png)

![image](https://user-images.githubusercontent.com/46695970/122489182-a5d2a900-d011-11eb-84d1-f11dea8b5a5d.png)

To optimise segmentation, it is possible to tune the "Flow_threshold" and "Cell_probability_threshold" parameters. The values shown above were used for our analysis.

It is also possible to train the software to generate a custom model using manually segmented images. 
