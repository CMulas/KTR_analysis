# CellPose Parameters

CellPose is an AI-based segmentation tool that utilizes a pretrained model (generated by the user or in-built in the software) to generate the cell segmentation. The final output for CellPose is a bitmap file, where each cell has an intensity associated with a number label. The output can be visualized in Fiji as shown below:

![image](https://user-images.githubusercontent.com/46695970/122488352-e4676400-d00f-11eb-8675-0332624ebc16.png)

For our data, we found that running the predictions in-built in the software was sufficient for accurate segmentation. We will only be running the first, second and sixth module for segmentation. Follow instructions on CellPose for the first and second module as shown here: 

![image](https://user-images.githubusercontent.com/46695970/122488731-a74fa180-d010-11eb-96ab-fec2ab5484c0.png)

Once CellPose is installed, we can proceed with the segmentation in the sixth module. Google colab requires you to upload your images into Google Drive for Google colab to access your data. Upload your data into Google Drive; you can verify if Google Colab has access to your file by checking the Files tab to the left. 

Here are the parameters I used to generate the segmentation. After pressing the 'play button' for the module, CellPose will show you some images of the segmentation for you to verify if the segmentation is accurate. 
![image](https://user-images.githubusercontent.com/46695970/122489138-89cf0780-d011-11eb-8c1c-3adf3ef1d1b5.png)

![image](https://user-images.githubusercontent.com/46695970/122489182-a5d2a900-d011-11eb-84d1-f11dea8b5a5d.png)

If you would like to improve the segmentation, you can alter the "Flow_threshold" and "Cell_probability_threshold" values. The values shown above have been tested for multiple datasets and works well, but these values can be altered to suit your data better. 

If you are unhappy with the segmentation generated despite optimizing the above values, you can also train the software on your own data and create your own model. The training data set will require to upload some manually segmentation images. 
